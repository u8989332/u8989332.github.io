<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="GeekCodeParadise">
<meta property="og:url" content="http://example.com/page/19/index.html">
<meta property="og:site_name" content="GeekCodeParadise">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="LiJyu Gao">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/19/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>GeekCodeParadise</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">GeekCodeParadise</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2019/07/06/uva-272-tex-quotes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/06/uva-272-tex-quotes/" class="post-title-link" itemprop="url">UVa 272 TEX Quotes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-06 00:07:00" itemprop="dateCreated datePublished" datetime="2019-07-06T00:07:00+08:00">2019-07-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C#</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index"><span itemprop="name">ACM</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Level-Easy/" itemprop="url" rel="index"><span itemprop="name">Level-Easy</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%A8%8B%E5%BC%8F%E8%A7%A3%E9%A1%8C/" itemprop="url" rel="index"><span itemprop="name">程式解題</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ProgramSolving/" itemprop="url" rel="index"><span itemprop="name">ProgramSolving</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/UVa/" itemprop="url" rel="index"><span itemprop="name">UVa</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>UVa 272 TEX Quotes 解題報告</p>
<h4 id="平台："><a href="#平台：" class="headerlink" title="平台："></a>平台：</h4><p>UVa Online Judge</p>
<h4 id="題號："><a href="#題號：" class="headerlink" title="題號："></a>題號：</h4><p>272 - TEX Quotes</p>
<h4 id="題目連結："><a href="#題目連結：" class="headerlink" title="題目連結："></a>題目連結：</h4><p><a target="_blank" rel="noopener" href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=208">https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid&#x3D;8&amp;category&#x3D;24&amp;page&#x3D;show_problem&amp;problem&#x3D;208</a></p>
<h4 id="題目說明："><a href="#題目說明：" class="headerlink" title="題目說明："></a>題目說明：</h4><p>輸入為不等長的字串，輸出原始輸入的字串，但是有包含 “ 字元時，從前面數來第奇數個出現則輸出為 ``、第偶數個出現則輸出為 ‘’</p>
<h4 id="範例輸入："><a href="#範例輸入：" class="headerlink" title="範例輸入："></a>範例輸入：</h4><p>“To be or not to be,” quoth the Bard, “that is the question”. The programming contestant replied: “I must disagree. To `C’ or not to `C’, that is The Question!”</p>
<h4 id="範例輸出："><a href="#範例輸出：" class="headerlink" title="範例輸出："></a>範例輸出：</h4><p>``To be or not to be,’’ quoth the Bard, ``that is the question’’. The programming contestant replied: ``I must disagree. To `C’ or not to `C’, that is The Question!’’</p>
<h4 id="解題方法："><a href="#解題方法：" class="headerlink" title="解題方法："></a>解題方法：</h4><p>　　使用C語言的getchar讀一個字元即輸出一個字元。也有使用gets一行一行讀的解法，但gets因為Buffer的漏洞問題，在C11以後不能使用，取而代之的是gets_s方法。<br>　　難度為Easy</p>
<h4 id="GITHUB位置："><a href="#GITHUB位置：" class="headerlink" title="GITHUB位置："></a>GITHUB位置：</h4><p><a target="_blank" rel="noopener" href="https://github.com/u8989332/ProblemSolving/blob/master/UVaOnlineJudge/200-299/272.c">https://github.com/u8989332/ProblemSolving/blob/master/UVaOnlineJudge/200-299/272.c</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/30/design-pattern-proxy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/30/design-pattern-proxy/" class="post-title-link" itemprop="url">代理模式 Proxy Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-30 07:47:00" itemprop="dateCreated datePublished" datetime="2018-04-30T07:47:00+08:00">2018-04-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>代理模式 (Proxy Pattern) 的設計模式介紹</p>
<h4 id="1-案例需求"><a href="#1-案例需求" class="headerlink" title="1. 案例需求"></a>1. 案例需求</h4><p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/3-1-1.jpg"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/3-.jpg" alt="JoJo&#39;s Bizarre Adventure"></a></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="http://www.horace.org/blog/2015/11/22/jojo-%E5%A5%87%E5%A6%99%E5%86%92%E9%9A%AA-%E7%AC%AC%E4%BA%8C%E5%AD%A3%EF%BC%88%E5%8B%95%E7%95%AB%E7%89%88%EF%BC%89/">http://www.horace.org/blog/2015/11/22/jojo-%E5%A5%87%E5%A6%99%E5%86%92%E9%9A%AA-%E7%AC%AC%E4%BA%8C%E5%AD%A3%EF%BC%88%E5%8B%95%E7%95%AB%E7%89%88%EF%BC%89/</a></p>
<p>知名動畫-JoJo的奇妙冒险，描述喬斯達家族歷代主人翁與各種敵人戰鬥的故事。在《星塵鬥士》篇幅，引入了替身能力，可以讓人產生另一個戰鬥角色，依照主人的意志代替主人戰鬥。</p>
<h4 id="2-程式設計"><a href="#2-程式設計" class="headerlink" title="2. 程式設計"></a>2. 程式設計</h4><p>建立一個角色(Character)介面，有一個攻擊(Attack)的方法。以主角_承太郎_(Jotaro)為例，他擁有替身_白金之星_(Star Platinum)，特點是快速又堅硬的攻擊。_承太郎_和_白金之星_實作Character介面，且_白金之星_關連了_承太郎_，如下UML類別圖：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/ProxyPattern_EXAMPLE-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/ProxyPattern_EXAMPLE.png" alt="代理模式 Proxy Pattern 案例 UML Class"></a></p>
<p>這三個類別的實作的程式碼：</p>
<p>public interface Character<br>{<br>    void Attack();<br>}</p>
<p>public class Jotaro : Character<br>{<br>    public void Attack()<br>    {<br>        Console.WriteLine(“快速連續揮拳(オラオラオラオラオラ)”);<br>    }<br>}</p>
<p>public class StarPlatinum : Character<br>{<br>    private Jotaro master;<br>    public StarPlatinum()<br>    {<br>        master &#x3D; new Jotaro();<br>    }</p>
<pre><code>public void Attack()
&#123;
    this.master.Attack();
&#125;
</code></pre>
<p>}</p>
<p>模擬_承太郎_戰鬥的場景程式和輸出結果：</p>
<p>public class Program<br>{<br>    static void Main(string[] args)<br>    {<br>        &#x2F;&#x2F;為了顯示日文<br>        Console.OutputEncoding &#x3D; Encoding.UTF8;</p>
<pre><code>    StarPlatinum starPlatinum = new StarPlatinum();
    starPlatinum.Attack();

    Console.Read();
&#125;
</code></pre>
<p>}</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/EXAMPLE_CONSOLE-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/EXAMPLE_CONSOLE.png" alt="代理模式 Proxy Pattern 案例結果"></a></p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/c17-1.gif"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/c17.gif" alt="JoJo&#39;s Bizarre Adventure"></a></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="http://knowyourmeme.com/photos/1202911-jojos-bizarre-adventure">http://knowyourmeme.com/photos/1202911-jojos-bizarre-adventure</a></p>
<h4 id="3-代理模式介紹"><a href="#3-代理模式介紹" class="headerlink" title="3. 代理模式介紹"></a>3. 代理模式介紹</h4><h5 id="3-1-代理模式定義"><a href="#3-1-代理模式定義" class="headerlink" title="3.1 代理模式定義"></a>3.1 代理模式定義</h5><p>根據書上的介紹，代理模式的定義：Provide a surrogate or placeholder for another object to control access to it.。意思是給一個物件新增一個代理，這代理能控制這物件的引用。</p>
<p>　　代理模式的通用UML類別圖：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/ProxyPattern_GENERAL-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/ProxyPattern_GENERAL.png" alt="代理模式 Proxy Pattern 經典 UML Class"></a></p>
<p>　　而代理模式包含三大角色：</p>
<p>　　Subject：是一個抽象類別或介面，定義Proxy和RealSubject的共同介面，當任何有使用RealObject的地方皆能使用Proxy。依照前述例子，是Character類別。</p>
<p>　　RealSubject：被代理的角色，也是實際執行商業邏輯的單位。依照前述例子，是Jotaro類別。</p>
<p>　　Proxy：代理角色，且引用RealSubject，客戶要與RealSubject互動得透過Proxy。依照前述例子，是StarPlatinum類別，引用了Jotaro物件。</p>
<h5 id="3-2-代理模式優缺點"><a href="#3-2-代理模式優缺點" class="headerlink" title="3.2 代理模式優缺點"></a>3.2 代理模式優缺點</h5><p>優點</p>
<ul>
<li>真實角色(RealSubject)完成實際的商業邏輯，其他非它的職責交由代理完成</li>
<li>當真實角色商業邏輯變化時，只要Subject定義的介面不變，Proxy仍不用修改而正常使用</li>
</ul>
<p>　　缺點</p>
<ul>
<li>客戶需透過代理才能請求真實角色做事，處理速度會變慢。</li>
</ul>
<h5 id="3-3-代理模式的應用"><a href="#3-3-代理模式的應用" class="headerlink" title="3.3 代理模式的應用"></a>3.3 代理模式的應用</h5><ul>
<li>遠程代理：可以為不同地址空間的物件提供一個本地的代理物件，比如Web Service，在.NET有WebReference、Java有RMI</li>
<li>虛擬代理：是根據需建立消耗大資源的物件，先建立一個小的物件，等待真實角色實例化完成。比如使用Web或者視窗程式，在讀取圖片時，會先用＂Loadiing…＂等待畫面給客戶看，當真實圖片載入完成後，再實際顯示給客戶</li>
<li>保護代理：依照客戶的權限，來控制對真實角色的存取</li>
<li>智能引用：當代理呼叫真實角色時，代理會做其他的功能，比如計算真實角色被呼叫的次數</li>
<li>快取代理：將真實角色的運算結果儲存在臨時的共同空間，多個客戶可以取這些共同的結果</li>
</ul>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第07章　為他人做嫁衣—代理模式</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第12章 代理模式</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LRwBqc">Elisabeth Freeman, Eric Freeman, Bert Bates, Kathy Sierra 著、蔡學鏞 譯, 深入淺出設計模式 11 代理人模式</a></li>
<li><a target="_blank" rel="noopener" href="http://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/proxy.html">me115 图说设计模式 6. 代理模式</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/22/design-pattern-decorator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/22/design-pattern-decorator/" class="post-title-link" itemprop="url">裝飾者模式 Decorator Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-22 13:42:00" itemprop="dateCreated datePublished" datetime="2018-04-22T13:42:00+08:00">2018-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>裝飾者模式 Decorator Pattern 的設計模式介紹</p>
<h4 id="1-案例需求"><a href="#1-案例需求" class="headerlink" title="1. 案例需求"></a>1. 案例需求</h4><p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/Fotolia_30691356_Subscription_XL-1.jpg"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/Fotolia_30691356_Subscription_XL.jpg" alt="裝飾者模式 Decorator Pattern 案例"></a></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="https://www.rentcafe.com/blog/cities/renting-a-house/">https://www.rentcafe.com/blog/cities/renting-a-house/</a></p>
<p>　　在外地求學、工作時，大部分需要找租屋來住，每種租屋提供的設施、環境都不同，有的靠近捷運、有電視、有冰箱、有洗衣機等。假如有房東要介紹自己的租屋內容，那程式如何設計呢？</p>
<h4 id="2-程式設計"><a href="#2-程式設計" class="headerlink" title="2. 程式設計"></a>2. 程式設計</h4><p>(錯誤)</p>
<p>　　建立一個建築物(Building)抽象類別，有一個描述(Show)的方法，另外有公寓和透天屋需透過繼承它並實作Show方法，如下UML類別圖：</p>
<p>　　在Building裡定義三個bool值，可設定該租屋是否有這些環境設施，並</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/DecoratorFactory_ERROR-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/DecoratorFactory_ERROR.png"></a></p>
<p>在Show方法依據這些值做環境設施描述，程式碼：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> refrigerator;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> washingMachine;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> closeToMRT;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> Refrigerator</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> refrigerator;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            refrigerator = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> WashingMachine</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> washingMachine;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            washingMachine = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> CloseToMRT</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> closeToMRT;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            closeToMRT = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Refrigerator)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(<span class="string">&quot;有冰箱 &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (WashingMachine)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(<span class="string">&quot;有洗衣機 &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (CloseToMRT)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Write(<span class="string">&quot;靠近捷運 &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　Apartment和Townhouse具體類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Apartment</span> : <span class="title">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">base</span>.Show();</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;的公寓&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Townhouse</span> : <span class="title">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">base</span>.Show();</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;的透天屋&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　模擬租屋宣傳的場景程式和輸出結果：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;第1間租屋是&quot;</span>);</span><br><span class="line">        Building b1 = <span class="keyword">new</span> Apartment();</span><br><span class="line">        b1.CloseToMRT = <span class="literal">true</span>;</span><br><span class="line">        b1.Refrigerator = <span class="literal">false</span>;</span><br><span class="line">        b1.WashingMachine = <span class="literal">true</span>;</span><br><span class="line">        b1.Show();</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;第2間租屋是&quot;</span>);</span><br><span class="line">        Building b2 = <span class="keyword">new</span> Townhouse();</span><br><span class="line">        b2.CloseToMRT = <span class="literal">false</span>;</span><br><span class="line">        b2.Refrigerator = <span class="literal">true</span>;</span><br><span class="line">        b2.WashingMachine = <span class="literal">true</span>;</span><br><span class="line">        b2.Show();</span><br><span class="line">        Console.Read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/program_error-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/program_error.png" alt="第一個案例結果"></a></p>
<p>程式很完美的宣傳租屋環境，但是，如果要環境設施不只上述三點呢？有電視、有網路、有桌子、有沙發．．．多了這麼多條件，是不是需要改底層Building抽象類別？這樣會違反<a target="_blank" rel="noopener" href="https://geekcodeparadise.com/2018/03/design-pattern-the-open-closed-principle/">開閉原則</a>！</p>
<p>(正確)</p>
<p>　　為了解決上述問題，新增一個裝飾者(Decorator)抽象類別，將租屋的環境設施個別繼承這類別。其UML類別圖如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/DecoratorFactory_OK-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/DecoratorFactory_OK.png" alt="裝飾者模式 Decorator Pattern 案例UML Class"></a></p>
<p>　　Building抽象類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Show</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　Apartment和Townhouse具體類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Townhouse</span> : <span class="title">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;的透天屋&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Apartment</span> : <span class="title">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;的公寓&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　Decorator抽象類別，該類別繼承Building，且用組合的方式將Building作為自己的屬性。實做Show方法是呼叫組合的Building物件的Show：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Decorator</span> : <span class="title">Building</span></span><br><span class="line">&#123;</span><br><span class="line">    Building building;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorator</span>(<span class="params">Building building</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.building = building;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.building != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.building.Show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>WashingMachine、Refrigerator和CloseToMRT繼承Decorator，實做自己的Show方法，且要呼叫父類別(Decorator)的Show：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WashingMachine</span> : <span class="title">Decorator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">WashingMachine</span>(<span class="params">Building building</span>) : <span class="title">base</span>(<span class="params">building</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;有洗衣機 &quot;</span>);</span><br><span class="line">        <span class="keyword">base</span>.Show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CloseToMRT</span> : <span class="title">Decorator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CloseToMRT</span>(<span class="params">Building building</span>) : <span class="title">base</span>(<span class="params">building</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;靠近捷運 &quot;</span>);</span><br><span class="line">        <span class="keyword">base</span>.Show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Refrigerator</span> : <span class="title">Decorator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Refrigerator</span>(<span class="params">Building building</span>) : <span class="title">base</span>(<span class="params">building</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Show</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.Write(<span class="string">&quot;有冰箱 &quot;</span>);</span><br><span class="line">        <span class="keyword">base</span>.Show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>模擬使用裝飾者模式的租屋宣傳的場景程式和輸出結果：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;第1間租屋是&quot;</span>);</span><br><span class="line">        Building b1 = <span class="keyword">new</span> Apartment();</span><br><span class="line">        b1 = <span class="keyword">new</span> CloseToMRT(b1);</span><br><span class="line">        b1 = <span class="keyword">new</span> WashingMachine(b1);</span><br><span class="line">        b1.Show();</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;第2間租屋是&quot;</span>);</span><br><span class="line">        Building b2 = <span class="keyword">new</span> Townhouse();</span><br><span class="line">        b2 = <span class="keyword">new</span> Refrigerator(b2);</span><br><span class="line">        b2 = <span class="keyword">new</span> WashingMachine(b2);</span><br><span class="line">        b2.Show();</span><br><span class="line">        Console.Read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/Program_ok-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/Program_ok.png" alt="裝飾者模式 Decorator Pattern 第二個案例結果"></a></p>
<h4 id="3-裝飾者模式介紹"><a href="#3-裝飾者模式介紹" class="headerlink" title="3. 裝飾者模式介紹"></a>3. 裝飾者模式介紹</h4><h5 id="3-1-裝飾者模式定義"><a href="#3-1-裝飾者模式定義" class="headerlink" title="3.1 裝飾者模式定義"></a>3.1 裝飾者模式定義</h5><p>根據書上的介紹，裝飾者模式的定義：Attach additional responsibilities to an object dynamically keeping the same interface.Decorators provide a flexible alternative to subclassing for extending functionality。意思是動態地給一個物件新增一些額外的責任，以增加功能來說，裝飾者比衍生子類別還要靈活。</p>
<p>　　裝飾者模式的通用UML類別圖：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/general_DF-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/general_DF.png" alt="裝飾者模式 Decorator Pattern UML Class"></a></p>
<p>　　而裝飾者模式包含四大角色：</p>
<p>　　Component：是一個抽象類別或介面，定義我們最核心的物件，能被動態地新增職責。依照前述例子，是Building類別。</p>
<p>　　ConcreteComponent：繼承Component，能動態地新增職責，也是實際被裝飾的對象。依照前述例子，是Apartment和Townhouse類別。</p>
<p>　　Decorator：裝飾抽象類別，用來擴展Component類別的功能，且對於Component來說，不須知道Decorator的存在。</p>
<p>　　ConcreateDecorator：繼承Decorator，具體的裝飾物件，可以新增Component的職責，甚至可以有其他的屬性和方法。依照前述例子，是Refrigerator、WashingMachine和CloseToMRT三個類別，且未來要新增其他環境設施，都繼承Decorator來實做，再裝飾到Building。</p>
<h5 id="3-2-裝飾者模式優缺點"><a href="#3-2-裝飾者模式優缺點" class="headerlink" title="3.2 裝飾者模式優缺點"></a>3.2 裝飾者模式優缺點</h5><p>優點</p>
<ul>
<li>裝飾類和被裝飾類互相獨立，不會有耦合</li>
<li>不管裝飾了多少層，最後回傳的物件仍是Component類別，符合里氏替換原則</li>
<li>動態地擴展具體類別的功能</li>
</ul>
<p>　　缺點</p>
<ul>
<li>裝飾得過多會使物件複雜，要一層層剝開檢查是否有錯誤。</li>
</ul>
<h5 id="3-3-裝飾者模式使用情境"><a href="#3-3-裝飾者模式使用情境" class="headerlink" title="3.3 裝飾者模式使用情境"></a>3.3 裝飾者模式使用情境</h5><ul>
<li>需要擴展／新增一個類別的功能，且這些功能又能撤換掉</li>
</ul>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第06章｜穿什麼有這麼重要？—裝飾模式</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第17章 裝飾模式</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LRwBqc">Elisabeth Freeman, Eric Freeman, Bert Bates, Kathy Sierra 著、蔡學鏞 譯, 深入淺出設計模式 3 裝飾者模式</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/16/design-pattern-law-of-demeter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/16/design-pattern-law-of-demeter/" class="post-title-link" itemprop="url">迪米特法則 Law of Demeter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-16 23:13:00" itemprop="dateCreated datePublished" datetime="2018-04-16T23:13:00+08:00">2018-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>迪米特法則 Law of Demeter 的設計模式介紹</p>
<h4 id="1-迪米特法則介紹"><a href="#1-迪米特法則介紹" class="headerlink" title="1. 迪米特法則介紹"></a>1. 迪米特法則介紹</h4><h5 id="1-1-迪米特法則定義"><a href="#1-1-迪米特法則定義" class="headerlink" title="1.1 迪米特法則定義"></a>1.1 迪米特法則定義</h5><p>迪米特法則又稱為最少知識原則（Least Knowledge Principle），其發表的原意包含這項解釋：Only talk to your immediate friends。<br>　　兩物件之間的耦合稱為朋友關係，包含組合、聚合、依賴等，而迪米特法則要求只與直接的朋友溝通。</p>
<h5 id="1-2-迪米特法則案例"><a href="#1-2-迪米特法則案例" class="headerlink" title="1.2 迪米特法則案例"></a>1.2 迪米特法則案例</h5><p>（錯誤）　　</p>
<p>　　現在有很多語音助理，能跟它用口語方式下達命令，做撥打電話、查天氣、找聯絡人等功能。假如設計出一個語音助理類別Assistant，叫它幫我計算數學式，其呼叫的程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Human</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Assistant assistant;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CallCalculate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> expression = <span class="string">&quot;1 + 5 * 8&quot;</span>;</span><br><span class="line">        <span class="built_in">double</span> result = <span class="keyword">this</span>.assistant.getCalculator().Calculate(expression);</span><br><span class="line">        Console.WriteLine(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　上方程式碼是透過assistant取得calculator物件，再由calculator計算數學式，並回傳運算結果。但是，為何計算數學會需要知道calculator這個物件的存在呢？</p>
<p>（正確）<br>　　我只要語音助理做我要的功能，不要再傳我不認識的物件給我。透過迪米特法則，可改成下列程式碼，只讓Human呼叫public的Calculate函式。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Human</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> Assistant assistant;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CallCalculate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> expression = <span class="string">&quot;1 + 5 * 8&quot;</span>;</span><br><span class="line">        <span class="built_in">double</span> result = <span class="keyword">this</span>.assistant.Calculate(expression);</span><br><span class="line">        Console.WriteLine(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="1-3-迪米特法則的實踐"><a href="#1-3-迪米特法則的實踐" class="headerlink" title="1.3 迪米特法則的實踐"></a>1.3 迪米特法則的實踐</h5><ul>
<li>適當的解耦：迪米特法則的核心概念是為了類別之間能高內聚、低耦合，達到類別可重複使用。但是套用此原則時，需要做跳轉，才能呼叫需要的類別。以前述套用迪米特法則的計算數學例子，中間經過了一次跳轉，最後呼叫Calculator的Calculate函式。如果設計的跳轉次數太多，會造成系統更複雜而維護更困難，因此盡量跳轉在2次內就好。</li>
</ul>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第11章｜無熟人難辦事？—迪米特法則</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第5章 迪米特法則</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/07/design-pattern-interface-segregation-principle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/07/design-pattern-interface-segregation-principle/" class="post-title-link" itemprop="url">介面隔離原則 Interface Segregation Principle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-07 15:00:00" itemprop="dateCreated datePublished" datetime="2018-04-07T15:00:00+08:00">2018-04-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>介面隔離原則 Interface Segregation Principle 的設計模式介紹</p>
<h4 id="1-介面隔離原則介紹"><a href="#1-介面隔離原則介紹" class="headerlink" title="1. 介面隔離原則介紹"></a>1. 介面隔離原則介紹</h4><h5 id="1-1-介面隔離原則定義"><a href="#1-1-介面隔離原則定義" class="headerlink" title="1.1 介面隔離原則定義"></a>1.1 介面隔離原則定義</h5><p>根據書上的介紹，介面隔離原則的定義：Clients should not be forced to depend upon interfaces that they don’t use.。其意思是客戶端不應該依賴它不需要的介面。</p>
<h5 id="1-2-介面隔離原則案例"><a href="#1-2-介面隔離原則案例" class="headerlink" title="1.2 介面隔離原則案例"></a>1.2 介面隔離原則案例</h5><p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/content-link-iphone-transfer-content-ios11_2x-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/content-link-iphone-transfer-content-ios11_2x.png"></a></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="https://support.apple.com/zh-tw/iphone">https://support.apple.com/zh-tw/iphone</a> 　　</p>
<p>（錯誤）　　</p>
<p>　　現在的智慧型手機有許多的功能，除了原有通話功能外，還有照相、USB傳輸、上網、記憶卡等。如果有一位上班族擁有一款智慧型手機，其UML類別圖如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/ISP_ERROR-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/ISP_ERROR.png" alt="介面隔離原則 Interface Segregation Principle 案例 UML Class"></a></p>
<p>Worker類別定義一個建構函數和一個方法Call，透過建構函數將IPhone物件給Worker，再透過call可用手機打電話；IPhone介面定義四個方法，包含撥號、USB傳輸、拍照和記憶卡。而IPhoneX是實作IPhone介面的具體類別。<br>　　Worker的程式碼如下，其中call裡面呼叫IPhone的Dial方法：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Worker</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> IPhone phone;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Worker</span>(<span class="params">IPhone phone</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Call</span>(<span class="params"><span class="built_in">string</span> phoneNumber</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.phone.Dial(phoneNumber);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　IPhone的程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IPhone</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Dial</span>(<span class="params"><span class="built_in">string</span> phoneNumber</span>)</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">USBConnect</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">TakePhoto</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">MemoryCard</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>IPhoneX的程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">IPhoneX</span> : <span class="title">IPhone</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dial</span>(<span class="params"><span class="built_in">string</span> phoneNumber</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;正在撥號給&quot;</span> + phoneNumber +<span class="string">&quot;，請稍等&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MemoryCard</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;存取記憶卡&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TakePhoto</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;拍了一張照片&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">USBConnect</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;存取USB裝置&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完成這三項程式碼，可以執行上班族打電話的應用程式：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        IPhone phone = <span class="keyword">new</span> IPhoneX();</span><br><span class="line">        Worker worker = <span class="keyword">new</span> Worker(phone);</span><br><span class="line">        worker.Call(<span class="string">&quot;0900123456&quot;</span>);</span><br><span class="line">        Console.Read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　問題來了，假如這位上班族要出差，需要到一個限定手機只能撥打電話功能的工作環境，那麼他的潮牌IPhoneX就不能使用了！</p>
<p>（正確）<br>　　要解決前述的問題，需使用介面隔離原則，將Dial這功能放置別的介面，新的UML類別圖如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/ISP_OK-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/ISP_OK.png" alt="介面隔離原則 Interface Segregation Principle 案例 UML Class"></a></p>
<p>　　建立兩個介面：ISimplePhone和ISmartPhone，分別定義基本手機的功能和智慧型手機的功能，這兩個介面程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ISimplePhone</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Dial</span>(<span class="params"><span class="built_in">string</span> phoneNumber</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ISmartPhone</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">USBConnect</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">TakePhoto</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">MemoryCard</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　實作ISimplePhone的具體類別StupidPhone如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">StupidPhone</span> : <span class="title">ISimplePhone</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dial</span>(<span class="params"><span class="built_in">string</span> phoneNumber</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;正在撥號給&quot;</span> + phoneNumber +<span class="string">&quot;，請稍等&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由於手機的介面改了，因此也要修改Worker的依賴介面為ISimplePhone，修改後的程式碼：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Worker</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> ISimplePhone phone;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Worker</span>(<span class="params">ISimplePhone phone</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Call</span>(<span class="params"><span class="built_in">string</span> phoneNumber</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.phone.Dial(phoneNumber);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　 用手機打電話的應用程式：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ISimplePhone phone = <span class="keyword">new</span> StupidPhone();</span><br><span class="line">        Worker worker = <span class="keyword">new</span> Worker(phone);</span><br><span class="line">        worker.Call(<span class="string">&quot;0900123456&quot;</span>);</span><br><span class="line">        Console.Read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　如此一來，上班族能依工作換環境來替換智障型手機或智慧型手機。</p>
<h5 id="1-3-使用介面隔離原則的實踐"><a href="#1-3-使用介面隔離原則的實踐" class="headerlink" title="1.3 使用介面隔離原則的實踐"></a>1.3 使用介面隔離原則的實踐</h5><ul>
<li>介面功能盡量少：要避免Fat Interface的狀況，能拆除功能就拆，達到一個介面只服務一個子模組&#x2F;商業邏輯。但有可能會與單一職責原則有衝突，比如已經拆成最仔細但功能還是很多，此時要以單一職責原則為優先。</li>
<li>介面若被設計得太汙染，可使用轉接器模式處理。</li>
</ul>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第4章 接口隔離原則</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3z8aHHK">Robert C. Martin, Agile Software Development: Principles, Patterns, and Practices , Chap 12 ISP：Interface Segregation Principle</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/01/design-pattern-dependency-inversion-principle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/01/design-pattern-dependency-inversion-principle/" class="post-title-link" itemprop="url">依賴倒轉原則 Dependency Inversion Principle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-01 14:30:00" itemprop="dateCreated datePublished" datetime="2018-04-01T14:30:00+08:00">2018-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>依賴倒轉原則 Dependency Inversion Principle 的設計模式介紹</p>
<h4 id="1-依賴倒轉原則介紹"><a href="#1-依賴倒轉原則介紹" class="headerlink" title="1. 依賴倒轉原則介紹"></a>1. 依賴倒轉原則介紹</h4><h5 id="1-1-依賴倒轉原則定義"><a href="#1-1-依賴倒轉原則定義" class="headerlink" title="1.1 依賴倒轉原則定義"></a>1.1 依賴倒轉原則定義</h5><p>根據書上的介紹，依賴倒轉原則的定義：High level modules should not depend upon low level modules. Both should depend upon abstractions. Abstractions should not depend upon details. Details should depend upon abstractions.。其意思包含三項</p>
<ul>
<li>高層模組不應該依賴低層模組，兩者都應該依賴抽象</li>
<li>抽象不應該依賴細節</li>
<li>細節應該依賴抽象</li>
</ul>
<h5 id="1-2-依賴倒轉原則案例"><a href="#1-2-依賴倒轉原則案例" class="headerlink" title="1.2 依賴倒轉原則案例"></a>1.2 依賴倒轉原則案例</h5><p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/0breakfast-eggs-sausage-bacon-toast-super-lovers-02-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/0breakfast-eggs-sausage-bacon-toast-super-lovers-02.png"></a></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="https://itadakimasuanime.wordpress.com/2016/12/14/12-days-of-anime-2016-food-edition-day-1-breakfast-year-in-review/">https://itadakimasuanime.wordpress.com/2016/12/14/12-days-of-anime-2016-food-edition-day-1-breakfast-year-in-review/</a> 　　</p>
<p>（錯誤）　　</p>
<p>　　許多民眾的一天主要能量來源，來自於早餐店，如果早餐店想賣個漢堡做生意，其UML類別圖如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/DIP_ERROR-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/DIP_ERROR.png" alt="依賴倒轉原則 Dependency Inversion Principle 案例 UML Class"></a></p>
<p>　　BreakfastShop類別定義一個方法cook，可以製作漢堡；Hamburger類別定義一個方法recipe，可以提供做漢堡的食材。<br>　　BreakfastShop的程式碼如下，其中cook裡面呼叫Hamburger的recipe方法：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BreakfastShop</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cook</span>(<span class="params">Hamburger hamburger</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        hamburger.recipe();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　Hamburger的程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Hamburger</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recipe</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;漢堡需要麵包皮、生菜、豬肉片、番茄片、起士&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定義了BreakfastShop和Hamburger後，可以執行做漢堡的應用程式： 　</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        BreakfastShop shop = <span class="keyword">new</span> BreakfastShop();</span><br><span class="line">        Hamburger hamburger = <span class="keyword">new</span> Hamburger();</span><br><span class="line">        shop.cook(hamburger);</span><br><span class="line">        Console.Read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　問題來了，早餐店怎可能只做漢堡當生意來源呢？需要提供個飲料給客人喝解渴吧！<br>　　此時再多做奶茶作為飲品，新增一個奶茶類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MilkTea</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recipe</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;奶茶需要紅茶、牛奶、水&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>新增奶茶類別後，再看看BreakfastShop類別，發現早餐店沒有做奶茶的方法！這樣的設計是有問題的，變成早餐店和漢堡是緊耦合的關係，被依賴者的變更會需要修改依賴者，是個沒有穩定性的設計。</p>
<p>（正確）<br>　　要解決前述的問題，需使用依賴倒轉原則，新的早餐店UML設計如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/DIP_OK-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/DIP_OK.png" alt="依賴倒轉原則 Dependency Inversion Principle 案例 UML Class"></a></p>
<p>　　建立兩個介面：IBreakfastShop和IBreakfast，分別定義早餐店和早餐的各個職務，早餐店要會做早餐，需實作cook方法，IBreakfastShop程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IBreakfastShop</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">cook</span>(<span class="params">IBreakfast breakfast</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　此介面是一個抽象化，而實作的具體類別BreakfastShop如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BreakfastShop</span> : <span class="title">IBreakfastShop</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cook</span>(<span class="params">IBreakfast breakfast</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        breakfast.recipe();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在IBreakfastShop中，傳入了IBreakfast介面作為抽象之間的依賴關係，在BreakfastShop具體類別也傳入IBreakfast介面，但是要傳哪種早餐，需在高層模組中定義。<br>　　IBreakfast、Hamburger和MilkTea程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IBreakfast</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">recipe</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Hamburger</span> : <span class="title">IBreakfast</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recipe</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;漢堡需要麵包皮、生菜、豬肉片、番茄片、起士&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MilkTea</span> : <span class="title">IBreakfast</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recipe</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;奶茶需要紅茶、牛奶、水&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　在商業邏輯中，貫徹抽象不應該依賴細節，如同我們的IBreakfast介面（抽象）不依賴Hamburger和MilkTea實作類別（細節）。<br>　　早餐店能做漢堡和奶茶的場景程式碼：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        IBreakfastShop shop = <span class="keyword">new</span> BreakfastShop();</span><br><span class="line">        IBreakfast hamburger = <span class="keyword">new</span> Hamburger();</span><br><span class="line">        shop.cook(hamburger);</span><br><span class="line">        IBreakfast milkTea = <span class="keyword">new</span> MilkTea();</span><br><span class="line">        shop.cook(milkTea);</span><br><span class="line">        Console.Read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>高層模組（Program Class）呼叫低層模組如BreakfastShop、Hamburger和MilkTea等，都是依據介面(IBreakfastShop、IBreakfast）做呼叫，不必去更改細節。</p>
<h5 id="1-3-使用依賴倒轉原則的實踐"><a href="#1-3-使用依賴倒轉原則的實踐" class="headerlink" title="1.3 使用依賴倒轉原則的實踐"></a>1.3 使用依賴倒轉原則的實踐</h5><ul>
<li>對測試容易：若專案執行是用TDD(測試驅動開發），則每個人分配的工作項目，都可以先針對抽象類別或介面做測試。以上述早餐店為例，A分配做IBreakfastShop和實作類別，而B分配做IBreakfast和實作類別，若A已經完成自己的工作，而B還在開發，則A可以透過Mock相關的函式庫，模擬出一個IBreakfast物件做測試。</li>
<li>結合里氏替換原則：抽象化之間定義好依賴關係，再由各自的具體子類別去完成商業邏輯，達到替換父類別不會影響軟體功能。</li>
<li>為何依賴要倒轉：現實中的人類都是直接對具體事物有依賴關係，比如我們要做漢堡就做漢堡，要泡奶茶就泡奶茶。但到了物件導向程式設計，需要將事物做抽象化，定義抽象類別或介面，然後再定義抽象之間的依賴關係，這就是依賴倒轉。</li>
</ul>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第05章｜會修電腦不會修收音機？—依賴倒轉原則</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第3章 依賴倒轉原則</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/01/design-pattern-liskov-substitution-principle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/01/design-pattern-liskov-substitution-principle/" class="post-title-link" itemprop="url">里氏替換原則 Liskov Substitution Principle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-01 10:57:00" itemprop="dateCreated datePublished" datetime="2018-04-01T10:57:00+08:00">2018-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>里氏替換原則 Liskov Substitution Principle 的設計模式介紹</p>
<h4 id="1-里氏替換原則介紹"><a href="#1-里氏替換原則介紹" class="headerlink" title="1. 里氏替換原則介紹"></a>1. 里氏替換原則介紹</h4><h5 id="1-1-里氏替換原則定義"><a href="#1-1-里氏替換原則定義" class="headerlink" title="1.1 里氏替換原則定義"></a>1.1 里氏替換原則定義</h5><p>根據書上的介紹，里氏替換原則的定義：If for each object o1 of type S there is an object o2 of type T such that for all programs P defined in terms of T,the behavior of P is unchanged when o1 is substituted for o2 then S is a subtype of T.。<br>比較一般的解釋是只要有父類別出現的地方，則子類別也能出現，且替換為子類別時，不會產生錯誤或異常。但反過來則不行，子類別出現的地方，父類別未必能使用。</p>
<h5 id="1-2-里氏替換原則案例"><a href="#1-2-里氏替換原則案例" class="headerlink" title="1.2 里氏替換原則案例"></a>1.2 里氏替換原則案例</h5><p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/rockman_box_jp-1.jpg"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/rockman_box_jp.jpg"></a></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="http://timewarpgamer.com/features/box/_art/_disparity/_nes.html">http://timewarpgamer.com/features/box\_art\_disparity\_nes.html</a>　　</p>
<p>　　知名2D橫向射擊遊戲－洛克人，主角_洛克人_的武器除了使用自身的光束砲，還可以藉由打贏關卡BOSS，取得他們的能力作為自己的武器。所以，假設洛克人的武器之UML類別圖如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/LSP-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/LSP.png"></a></p>
<p>　　武器(AbstractWeapon)的主要職責是射擊，削切剪刀 (Cut)是從剪刀人取得的能力、超級手臂(Guts)是從氣力人取得的能力、冰天箭(Ice)是從冰人取得的能力。<br>　　在洛克人類別（Rockman）定義了一個方法killEnemy，使用武器來殺敵人，而具體要用什麼武器殺敵人，呼叫時才知道。AbstractWeapon抽象類別與介面的程式碼如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">AbstractWeapon</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">shoot</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　削切剪刀、超級手臂和冰天箭的實現類別如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Guts</span> : <span class="title">AbstractWeapon</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">shoot</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;超級手臂！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Cut</span> : <span class="title">AbstractWeapon</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">shoot</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;削切剪刀！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Ice</span> : <span class="title">AbstractWeapon</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">shoot</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;冰天箭！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　洛克人的實現類別如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Rockman</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> AbstractWeapon weapon;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWeapon</span>(<span class="params">AbstractWeapon weapon</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.weapon = weapon;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">killEnemy</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;洛克人準備射擊!&quot;</span>);</span><br><span class="line">        weapon.shoot();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>洛克人的武器是抽象的，當遇到敵人時，需藉由setWeapon來確認要使用哪種武器。模擬洛克人遇到敵人的程式碼和執行結果如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Rockman rockman = <span class="keyword">new</span> Rockman();</span><br><span class="line">        rockman.setWeapon(<span class="keyword">new</span> Cut());</span><br><span class="line">        rockman.killEnemy();</span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/04/LSP_1-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/04/LSP_1.png"></a></p>
<p>　　以上述場景，洛克人使用剪刀人的削切剪刀做射擊，如果想用其他武器，則可呼叫setWeapon(new Guts())或setWeapon(new Ice())做武器替換。</p>
<h5 id="1-3-里氏替換原則的含意"><a href="#1-3-里氏替換原則的含意" class="headerlink" title="1.3 里氏替換原則的含意"></a>1.3 里氏替換原則的含意</h5><ul>
<li>以上述洛克人為例，當每個子類別（武器）可以替換掉父類別（AbstractWeapon），軟體功能不受影響，此父類別才能真正地被重複使用，且子類別也能增加新的方法和屬性。</li>
<li>子類別的可替換性，代表不需修改父類別情況下做延展，成功實踐開閉原則。</li>
<li>如果子類別不能完整實作父類別的方法，或者父類別的某些方法在子類別發生大變化，則建議不使用繼承關係，改用依賴、聚集、組合等關係代替繼承。</li>
</ul>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第05章 第4節｜會修電腦不會修收音機？—依賴倒轉原則 里氏替換原則</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第2章 里氏替換原則</a></li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%B4%9B%E5%85%8B%E4%BA%BA_(%E6%B8%B8%E6%88%8F)">Wikipedia - 洛克人(遊戲)</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/03/04/design-pattern-the-open-closed-principle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/04/design-pattern-the-open-closed-principle/" class="post-title-link" itemprop="url">開閉原則 The Open-Closed Principle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-04 14:43:00" itemprop="dateCreated datePublished" datetime="2018-03-04T14:43:00+08:00">2018-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>開閉原則 The Open-Closed Principle 的設計模式介紹</p>
<h4 id="1-開閉原則介紹"><a href="#1-開閉原則介紹" class="headerlink" title="1. 開閉原則介紹"></a>1. 開閉原則介紹</h4><h5 id="1-1-開閉原則定義"><a href="#1-1-開閉原則定義" class="headerlink" title="1.1 開閉原則定義"></a>1.1 開閉原則定義</h5><p>根據書上的介紹，開閉原則的定義：Software entities like classes, modules and functions should be open for extension but closed for modifications。意思是軟體實體像是類別、模組和函式，應該只對延展開放，但對修改關閉。此原則是設計模式六大原則的核心原則，其他五原則都是以此原則做具體化。</p>
<h5 id="1-2-開閉原則案例"><a href="#1-2-開閉原則案例" class="headerlink" title="1.2 開閉原則案例"></a>1.2 開閉原則案例</h5><p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/03/when_is_the_steam_autumn_sale-1.jpg"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/03/when_is_the_steam_autumn_sale.jpg" alt="開閉原則 The Open-Closed Principle 說明"></a></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="http://www.alphr.com/games/1006124/steam-sales">http://www.alphr.com/games/1006124/steam-sales</a></p>
<p>　　以世界知名的遊戲平台Steam為例，此平台的主要功能包含賣遊戲。假設Steam賣遊戲的UML類別圖如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/03/OCP-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/03/OCP.png" alt="開閉原則 The Open-Closed Principle 案例 UML Class"></a></p>
<p>　　IGame介面定義了三個方法，遊戲名稱 (getName)、價錢(getPrice)和開發者(getDeveloper)。Steam類別是Steam平台。FPSGame是實作IGame的具體類別，是所有第一人稱射擊(FPS)遊戲的總稱。三種類別與介面的程式碼如下：<br>　　IGame介面：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IGame</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 遊戲名稱</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getName</span>()</span>;</span><br><span class="line">    <span class="comment">// 價格</span></span><br><span class="line">    <span class="function"><span class="built_in">int</span> <span class="title">getPrice</span>()</span>;</span><br><span class="line">    <span class="comment">// 開發者</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getDeveloper</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>FPSGame類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FPSGame</span> : <span class="title">IGame</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 遊戲名稱</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> name;</span><br><span class="line">    <span class="comment">// 遊戲開發者</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> developer;</span><br><span class="line">    <span class="comment">// 遊戲價格</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> price;</span><br><span class="line">    <span class="comment">// 用constructor儲存遊戲資料</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FPSGame</span>(<span class="params"><span class="built_in">string</span> _name, <span class="built_in">int</span> _price, <span class="built_in">string</span> _developer</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = _name;</span><br><span class="line">        <span class="keyword">this</span>.price = _price;</span><br><span class="line">        <span class="keyword">this</span>.developer = _developer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">getName</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">getPrice</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">getDeveloper</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.developer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Steam類別，並模擬賣出遊戲的紀錄：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Steam</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;IGame&gt; gameList = <span class="keyword">new</span> List&lt;IGame&gt;()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> FPSGame(<span class="string">&quot;H1Z1&quot;</span>,<span class="number">431</span>,<span class="string">&quot;Daybreak Game Company&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> FPSGame(<span class="string">&quot;Counter-Strike: Global Offensive&quot;</span>,<span class="number">398</span>,<span class="string">&quot;Valve&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> FPSGame(<span class="string">&quot;Left 4 Dead 2&quot;</span>,<span class="number">468</span>,<span class="string">&quot;Valve&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> FPSGame(<span class="string">&quot;Call of Duty: Modern Warfare 2&quot;</span>,<span class="number">655</span>,<span class="string">&quot;Infinity Ward , Aspyr&quot;</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Steam販售遊戲紀錄：&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span>(IGame game <span class="keyword">in</span> gameList)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Game Name: &quot;</span> + game.getName() + <span class="string">&quot;\tDeveloper: &quot;</span> + game.getDeveloper() + <span class="string">&quot;\tPrice: &quot;</span> + game.getPrice() );</span><br><span class="line">        &#125;</span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>執行Main函式的結果：</p>
<p><a target="_blank" rel="noopener" href="https://geekcodeparadise.com/wp-content/uploads/2022/01/2018-03-04-10_11_17-file____H__%E6%88%91%E7%9A%84%E8%B3%87%E6%96%99_%E5%B7%A5%E4%BD%9C_blogger%E5%88%86%E4%BA%AB_DesignPattern_%E7%A8%8B%E5%BC%8F%E7%A2%BC_DesignPattern_OCP_bin_Debug_OCP.E.png"><img src="https://geekcodeparadise.com/wp-content/uploads/2022/01/2018-03-04-10_11_17-file____H__%E6%88%91%E7%9A%84%E8%B3%87%E6%96%99_%E5%B7%A5%E4%BD%9C_blogger%E5%88%86%E4%BA%AB_DesignPattern_%E7%A8%8B%E5%BC%8F%E7%A2%BC_DesignPattern_OCP_bin_Debug_OCP.E.png"></a></p>
<p>　　以上模擬Steam賣遊戲的一般情況，但是Steam最有名的折扣活動是季節特賣，每款遊戲幾乎會有打折的優惠。假如原價450元以上的遊戲打8折，其他遊戲打6折，那麼要實現此打折的功能，該如何處理這樣的變化？有三種方法：</p>
<ul>
<li>修改介面（錯誤）：在IGame介面上新增getOffPrice()的方法，讓實作的具體類別都要實作此方法。但這樣修改的話，會造成FPSGame要修改、Steam類別也要修改。而IGame身為介面，應該是要穩定可靠的，不應該常有變化。因此這方法不考慮。</li>
<li>修改實作的具體類（錯誤）：在FPSGame的getPrice()中，將打折的功能實作在這函式，這是常見的處理方式。但是這方法還是有缺點，如果有想買FPS遊戲的人要看價格，透過已被修改的getPrice()，是打折後的價格，無法比較打折前後的差異，資訊會有落差。因此這方法不是最好的。</li>
<li>透過延展實作變化（正確）：將FPSGame的getPrice()改為virutal，並增加一個子類別OffFPSGame繼承FPSGame，覆寫getPrice()方法，而在Steam類別重新生成OffFPSGame物件。這方法修改少、風險也小，修改後的UML類別圖如下：</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/03/OCP_off-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/03/OCP_off.png" alt="開閉原則 The Open-Closed Principle 案例 UML Class"></a></p>
<p>　　OffFPSGame類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OffFPSGame</span> : <span class="title">FPSGame</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OffFPSGame</span>(<span class="params"><span class="built_in">string</span> _name, <span class="built_in">int</span> _price, <span class="built_in">string</span> _developer</span>) : <span class="title">base</span>(<span class="params">_name, _price, _developer</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">int</span> <span class="title">getPrice</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> originPrice = <span class="keyword">base</span>.getPrice();</span><br><span class="line">        <span class="built_in">int</span> offPrice = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (originPrice &gt;= <span class="number">450</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            offPrice = originPrice * <span class="number">80</span> / <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            offPrice = originPrice * <span class="number">60</span> / <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> offPrice;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Steam類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Steam</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;IGame&gt; gameList = <span class="keyword">new</span> List&lt;IGame&gt;()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> OffFPSGame(<span class="string">&quot;H1Z1&quot;</span>,<span class="number">431</span>,<span class="string">&quot;Daybreak Game Company&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> OffFPSGame(<span class="string">&quot;Counter-Strike: Global Offensive&quot;</span>,<span class="number">398</span>,<span class="string">&quot;Valve&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> OffFPSGame(<span class="string">&quot;Left 4 Dead 2&quot;</span>,<span class="number">468</span>,<span class="string">&quot;Valve&quot;</span>),</span><br><span class="line">        <span class="keyword">new</span> OffFPSGame(<span class="string">&quot;Call of Duty: Modern Warfare 2&quot;</span>,<span class="number">655</span>,<span class="string">&quot;Infinity Ward , Aspyr&quot;</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Steam販售遊戲紀錄：&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span>(IGame game <span class="keyword">in</span> gameList)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Game Name: &quot;</span> + game.getName() + <span class="string">&quot;\tDeveloper: &quot;</span> + game.getDeveloper() + <span class="string">&quot;\tPrice: &quot;</span> + game.getPrice() );</span><br><span class="line">        &#125;</span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>執行Main函式的結果：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/03/OCP_OFF_RESULT-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/03/OCP_OFF_RESULT.png" alt="開閉原則 The Open-Closed Principle 結果"></a></p>
<h5 id="1-3-使用開閉原則的原因"><a href="#1-3-使用開閉原則的原因" class="headerlink" title="1.3 使用開閉原則的原因"></a>1.3 使用開閉原則的原因</h5><ul>
<li>對測試的影響：以上述Steam賣遊戲為例，可以測試FPSGame類別的getPrice()等函式是否正確。而測試打折的功能，若是用修改介面或修改FPSGame的getPrice()，則測試的判斷條件會變複雜，不利於測試。透過新增的OffFPSGame類別，只需新增測試類別，針對OffFPSGame類別做測試，原本的FPSGame測試不用更改。</li>
<li>提升重複使用性：將商業邏輯切割越細，能重複利用子邏輯來組合更高階的功能模組，避免之後維護要修改功能時，要花不少時間找出分散的共同邏輯。</li>
<li>提升可維護性：最好的維護方法是透過延展，而不是一直修改原本的程式碼，否則原本程式碼越改越多、複雜時，會造成日後維護更加困難。</li>
<li>物件導向程式設計的需求：讓開發者一開始要盡量設計完整，考慮所有的變化，所有物件能抽象化，建立完整的抽象類別或介面，日後維護只需延展。</li>
</ul>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第04章｜升學求職兩不誤—開放-封閉原則</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第6章 開閉原則</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/02/24/design-pattern-single-responsibility-principle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/24/design-pattern-single-responsibility-principle/" class="post-title-link" itemprop="url">單一職責原則 Single Responsibility Principle</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-24 21:04:00" itemprop="dateCreated datePublished" datetime="2018-02-24T21:04:00+08:00">2018-02-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>單一職責原則 Single Responsibility Principle 的設計模式介紹</p>
<h4 id="1-單一職責原則介紹"><a href="#1-單一職責原則介紹" class="headerlink" title="1. 單一職責原則介紹"></a>1. 單一職責原則介紹</h4><h5 id="1-1-單一職責原則定義"><a href="#1-1-單一職責原則定義" class="headerlink" title="1.1 單一職責原則定義"></a>1.1 單一職責原則定義</h5><p>　　根據書上的介紹，單一職責原則的定義：There should never be more than one reason for a class to change。意思是對一個類別而言，應該只會有一個引起它變化的原因。此原則不只用在類別，還能用在介面，甚至是方法。</p>
<h5 id="1-2-單一職責原則案例"><a href="#1-2-單一職責原則案例" class="headerlink" title="1.2 單一職責原則案例"></a>1.2 單一職責原則案例</h5><p>　　以病患去診所就醫為例，要完成就醫的流程，從掛號、問診、領藥，可以寫成一個介面：</p>
<p>　　看似完美的介面，但其實仔細檢查，這介面有兩個職責：掛號與治療。掛號是向診所說要依序排隊看醫生，而治療的問診內容、領醫生開的藥跟掛號互不影響，所以可以切成兩個職責，如下UML類別圖：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/02/SRP-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/02/SRP.png" alt="單一職責原則 Single Responsibility Principle 案例 UML Class"></a></p>
<p>　　這樣的設計已經達到一個介面只有一個職責的原則，但是對於Patient類別而言，有兩個引起它變化的原因（ICure和IRegister），還能再透過組合模式做單一職責原則的設計，但是會有耦合性變高、類別數量增加的問題。</p>
<h5 id="1-3-單一職責原則優點"><a href="#1-3-單一職責原則優點" class="headerlink" title="1.3 單一職責原則優點"></a>1.3 單一職責原則優點</h5><ul>
<li>類別的複雜性降低</li>
<li>可讀性提高</li>
<li>可維護性提高</li>
<li>降低因更改的風險：如果單一職責能做得好，更改一項類別或介面時，不會引起其他介面或類別的變更</li>
</ul>
<h5 id="1-4-單一職責原則實踐難處"><a href="#1-4-單一職責原則實踐難處" class="headerlink" title="1.4 單一職責原則實踐難處"></a>1.4 單一職責原則實踐難處</h5><p>　　職責很難量化，因每個功能情境不同而職責劃分會有不同，只能建議介面的單一職責原則要遵守，而類別盡量達到。</p>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第03章｜拍攝UFO—單一職責原則</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第1章 單一職責原則</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/02/19/design-pattern-strategy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LiJyu Gao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekCodeParadise">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/19/design-pattern-strategy/" class="post-title-link" itemprop="url">策略模式 Strategy Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-19 21:33:00" itemprop="dateCreated datePublished" datetime="2018-02-19T21:33:00+08:00">2018-02-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-11-19 15:47:25" itemprop="dateModified" datetime="2023-11-19T15:47:25+08:00">2023-11-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index"><span itemprop="name">Design Pattern</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index"><span itemprop="name">OOP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>策略模式 Strategy Pattern 的設計模式介紹</p>
<h4 id="1-案例需求"><a href="#1-案例需求" class="headerlink" title="1. 案例需求"></a>1. 案例需求</h4><p><img src="https://geekcodeparadise.com/wp-content/uploads/2022/01/800x_100_w-61c240ccc454b.jpg" alt="灌籃高手"></p>
<p>圖片來源：<a target="_blank" rel="noopener" href="https://www.juksy.com/article/54771">https://www.juksy.com/article/54771</a></p>
<p>　　本篇以動漫－灌籃高手為例。在籃球比賽時，櫻木在我方禁區搶到籃板，準備要做進攻的動作，此時他腦中想了很多策略：</p>
<ul>
<li>自己灌籃！</li>
<li>傳球給三井壽投三分！</li>
<li>傳給宮城良田速攻</li>
<li>傳給赤木剛憲灌籃！</li>
<li>傳給櫻木討厭的流川楓速攻！</li>
</ul>
<h4 id="2-程式設計"><a href="#2-程式設計" class="headerlink" title="2. 程式設計"></a>2. 程式設計</h4><p>依照前述的需求，可畫出策略模式的UML類別圖，如下：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/02/Strategy-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/02/Strategy.png" alt="策略模式 Strategy Pattern 案例 UML Class"></a></p>
<p>　　分成三大區塊，Context類別、IOffense介面與實作介面的類別。<br>　　Context類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Context</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> IOffense offense;</span><br><span class="line">    <span class="comment">// 使用哪個進攻策略</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Context</span>(<span class="params">IOffense offense</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.offense = offense;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 呼叫進攻的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.offense.Operate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　IOffense介面：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IOffense</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Operate</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　實作IOffense的類別：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DunkSelf</span> : <span class="title">IOffense</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;我要灌籃啦！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PassAkagi</span> : <span class="title">IOffense</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;給赤木灌籃！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PassMitsui</span> : <span class="title">IOffense</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;給三井投三分！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PassMiyagi</span> : <span class="title">IOffense</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;給宮城速攻！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PassRukawa</span> : <span class="title">IOffense</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Operate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;給流川速攻！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　使用者介面：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Context context;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;第1次接到籃板時，&quot;</span>);</span><br><span class="line">context = <span class="keyword">new</span> Context(<span class="keyword">new</span> PassAkagi());</span><br><span class="line">context.Operate();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;第2次接到籃板時，&quot;</span>);</span><br><span class="line">context = <span class="keyword">new</span> Context(<span class="keyword">new</span> PassMitsui());</span><br><span class="line">context.Operate();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;第3次接到籃板時，&quot;</span>);</span><br><span class="line">context = <span class="keyword">new</span> Context(<span class="keyword">new</span> PassMiyagi());</span><br><span class="line">context.Operate();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;第4次接到籃板時，&quot;</span>);</span><br><span class="line">context = <span class="keyword">new</span> Context(<span class="keyword">new</span> PassRukawa());</span><br><span class="line">context.Operate();</span><br><span class="line">Console.WriteLine(<span class="string">&quot;第5次接到籃板時，&quot;</span>);</span><br><span class="line">context = <span class="keyword">new</span> Context(<span class="keyword">new</span> DunkSelf());</span><br><span class="line">context.Operate();</span><br><span class="line">Console.ReadKey();</span><br></pre></td></tr></table></figure>

<p>　　輸出結果：</p>
<p><img src="https://geekcodeparadise.com/wp-content/uploads/2022/01/2018-02-19-18_16_57-file____H__%E6%88%91%E7%9A%84%E8%B3%87%E6%96%99_%E5%B7%A5%E4%BD%9C_blogger%E5%88%86%E4%BA%AB_DesignPattern_%E7%A8%8B%E5%BC%8F%E7%A2%BC_DesignPattern_StrategyPattern_bin.png" alt="策略模式 Strategy Pattern 結果"></p>
<h4 id="3-策略模式介紹"><a href="#3-策略模式介紹" class="headerlink" title="3. 策略模式介紹"></a>3. 策略模式介紹</h4><h5 id="3-1-策略模式定義"><a href="#3-1-策略模式定義" class="headerlink" title="3.1 策略模式定義"></a>3.1 策略模式定義</h5><p>根據書上的介紹，策略模式的定義：Define a family of algorithms,encapsulate each one,and make them interchangeable。意思是將同一系列的每個演算法（策略）封裝起來，並可以互相交換使用。</p>
<p>　　而策略模式包含三大角色：</p>
<p>　　Context封裝角色：是個封裝類別，不能讓外部直接存取每個演算法，並維護Strategy物件。依照前述例子，是Context類別，其封裝了IOffense介面，不能讓外部呼叫IOffense。</p>
<p>　　Strategy抽象策略角色：演算法（策略）家族的抽象化，可用抽象類別或介面，需定義每個演算法的屬性和方法。依照前述例子，是IOffense介面，其定義了Operate方法。</p>
<p>　　ConcreteStrategy具體策略角色：實作Strategy抽象策略角色的類別，有實際的演算法。依照前述例子，具體策略的類別有PassAkagi、PassMitsui、PassMiyagi、PassRukawa與DunkSelf，皆實作IOffense介面。</p>
<p>　　此三大角色，可以總結出通用的UML類別圖：</p>
<p><a target="_blank" rel="noopener" href="http://geekcodeparadise.com/wp-content/uploads/2018/02/Strategy_common-1.png"><img src="http://geekcodeparadise.com/wp-content/uploads/2018/02/Strategy_common.png" alt="策略模式 Strategy Pattern 通用 UML Class"></a></p>
<h5 id="3-2-策略模式優缺點"><a href="#3-2-策略模式優缺點" class="headerlink" title="3.2 策略模式優缺點"></a>3.2 策略模式優缺點</h5><p>優點</p>
<ul>
<li>可自由切換演算法</li>
<li>避免使用多重條件判斷：實作Strategy封裝每個演算法（策略），不用太多的條件判斷如何切換演算法</li>
<li>擴展性高：有新的演算法直接實作介面</li>
<li>每個演算法容易單元測試</li>
</ul>
<p>缺點</p>
<ul>
<li>具體策略類別過多：因為每一個策略就是一個類別，重複使用的情形很少，導致類別數量過多。若超過3個策略，建議要使用混合模式。</li>
<li>每個策略類別對外暴露：在使用者介面，須了解要呼叫哪個演算法，再透過Context呼叫，不是很完善的設計。</li>
</ul>
<h5 id="3-3-策略模式使用情境"><a href="#3-3-策略模式使用情境" class="headerlink" title="3.3 策略模式使用情境"></a>3.3 策略模式使用情境</h5><ul>
<li>存在很多個類別且只有演算法不一樣的情境</li>
<li>需要自由切換演算法的情境</li>
<li>需要隱藏演算法規則的情境：不需要讓使用者知道每個演算法的實作方式，只需了解類別名稱</li>
</ul>
<h5 id="3-4-策略模式改良"><a href="#3-4-策略模式改良" class="headerlink" title="3.4 策略模式改良"></a>3.4 策略模式改良</h5><p>策略模式的重大缺點，是每個策略類別暴露於外部，變成呼叫策略還要先了解策略的名稱，很明顯這樣的封裝還不夠完整。後繼有提出混合其他的模式做改良，像是工廠方法、代理模式或享元模式。</p>
<h4 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h4><ol>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3LOwYlp">程杰 大話設計模式 第02章｜商場促銷—策略模式</a></li>
<li><a target="_blank" rel="noopener" href="https://amzn.to/3JLkwQW">秦小波 設計模式之禪 第18章  策略模式</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/18/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/20/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LiJyu Gao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">206</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LiJyu Gao</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
